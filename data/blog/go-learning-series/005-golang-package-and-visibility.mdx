---
title: '[Go å­¸ç¿’ç³»åˆ—] 5. Package èˆ‡å¯è¦‹æ€§ï¼šç†è§£æ¨¡çµ„åŒ–ç¨‹å¼çµæ§‹'
date: '2025-09-19'
summary: 'å­¸ç¿’ Go çš„ package çµæ§‹èˆ‡å¯è¦‹æ€§è¦å‰‡ï¼Œäº†è§£å¦‚ä½•çµ„ç¹”æ¨¡çµ„ã€åŒ¯å…¥å¥—ä»¶èˆ‡å»ºç«‹å¯é‡ç”¨çš„ç¨‹å¼ã€‚'
tags: ['Go', 'Go-Learning']
---

# å‰è¨€

åœ¨ä¸Šä¸€ç« ï¼Œæˆ‘å€‘å­¸æœƒäº†æ§åˆ¶æµç¨‹èˆ‡å‡½æ•¸ã€‚  
é€™ä¸€ç« è¦è«‡çš„æ˜¯ Go çš„æ¨¡çµ„åŒ–åŸºç¤ï¼š**packageï¼ˆå°åŒ…ï¼‰èˆ‡å¯è¦‹æ€§ï¼ˆvisibilityï¼‰**ã€‚

---

# Package æ˜¯ä»€éº¼ï¼Ÿ

åœ¨ Go è£¡ï¼Œæ¯å€‹ `.go` æª”æ¡ˆéƒ½è¦å®£å‘Šä¸€å€‹ `package`ã€‚  
å®ƒä»£è¡¨ã€Œé€™å€‹æª”æ¡ˆå±¬æ–¼å“ªå€‹æ¨¡çµ„ã€ã€‚

```
package main

import "fmt"

func main() {
    fmt.Println("Hello from main!")
}
```

---

## ç‚ºä»€éº¼éœ€è¦ packageï¼Ÿ

Package å¹«åŠ©æˆ‘å€‘ï¼š

- æ‹†åˆ†ç¨‹å¼é‚è¼¯
- é‡è¤‡ä½¿ç”¨ç¨‹å¼ç¢¼
- ç®¡ç†å‘½åç©ºé–“ï¼Œé¿å…åç¨±è¡çª

ä¾‹å¦‚ï¼Œæˆ‘å€‘å¯ä»¥æŠŠã€Œæ•¸å­¸é‚è¼¯ã€æ”¾åœ¨ `mathutil` å°åŒ…è£¡ï¼Œ  
ä¸»ç¨‹å¼åªè¦åŒ¯å…¥å³å¯ä½¿ç”¨ã€‚

---

# å»ºç«‹è‡ªè¨‚ package

å»ºç«‹ä¸€å€‹æ–°è³‡æ–™å¤¾ `mathutil`ï¼Œè£¡é¢æ”¾å…¥æª”æ¡ˆ `mathutil.go`ï¼š

```
ğŸ“ project/
 â”£ ğŸ“„ main.go
 â”— ğŸ“ mathutil/
     â”— ğŸ“„ mathutil.go
```

### mathutil/mathutil.go

```go:mathutil.go
package mathutil

func Add(a, b int) int {
    return a + b
}
```

### main.go

```go:main.go
package main

import (
    "fmt"
    "project/mathutil"
)

func main() {
    sum := mathutil.Add(3, 5)
    fmt.Println("çµæœ:", sum)
}
```

åŸ·è¡Œçµæœï¼š

```
çµæœ: 8
```

---

# å¯è¦‹æ€§ï¼ˆVisibilityï¼‰è¦å‰‡

åœ¨ Go ä¸­ï¼Œ**é¦–å­—æ¯å¤§å°å¯«** å°±æ±ºå®šäº†è®Šæ•¸æˆ–å‡½æ•¸æ˜¯å¦ã€Œå¯è¢«å¤–éƒ¨ä½¿ç”¨ã€ã€‚

| å®£å‘Šæ–¹å¼   | å¯è¦‹æ€§                | ç¯„ä¾‹                    |
| ---------- | --------------------- | ----------------------- |
| é¦–å­—æ¯å¤§å¯« | å¯åŒ¯å‡ºï¼ˆpublicï¼‰      | `Add`, `Pi`, `UserName` |
| é¦–å­—æ¯å°å¯« | å°åŒ…å…§å¯ç”¨ï¼ˆprivateï¼‰ | `add`, `pi`, `userName` |

---

### ç¯„ä¾‹ï¼šå¯è¦‹æ€§å·®ç•°

```go
package mathutil

// å…¬é–‹çš„å‡½æ•¸
func Add(a, b int) int {
    return a + b
}

// å°åŒ…å…§éƒ¨ä½¿ç”¨
func subtract(a, b int) int {
    return a - b
}
```

```go:main.go
// main.go
package main

import (
    "fmt"
    "project/mathutil"
)

func main() {
    fmt.Println(mathutil.Add(10, 5)) // âœ… å¯ç”¨
    fmt.Println(mathutil.subtract(10, 5)) // âŒ ç·¨è­¯éŒ¯èª¤ï¼šundefined
}
```

---

# `init()` å‡½æ•¸

æ¯å€‹ package å¯ä»¥å®šç¾©ä¸€å€‹ `init()` å‡½æ•¸ï¼Œ  
åœ¨åŒ¯å…¥æ™‚æœƒè‡ªå‹•åŸ·è¡Œï¼ˆåœ¨ `main()` ä¹‹å‰ï¼‰ã€‚

```
package mathutil

import "fmt"

func init() {
    fmt.Println("mathutil å·²è¼‰å…¥")
}
```

```
package main

import (
    "fmt"
    "project/mathutil"
)

func main() {
    fmt.Println("main é–‹å§‹åŸ·è¡Œ")
}
```

è¼¸å‡ºçµæœï¼š

```
mathutil å·²è¼‰å…¥
main é–‹å§‹åŸ·è¡Œ
```

> [!NOTE]
> `init()` å¸¸ç”¨æ–¼åˆå§‹åŒ–è¨­å®šã€è¨»å†Šè³‡æ–™æˆ–é©—è­‰ç’°å¢ƒã€‚  
> æ¯å€‹æª”æ¡ˆå¯æœ‰å¤šå€‹ `init()`ï¼ŒåŸ·è¡Œé †åºä¾æ“šæª”æ¡ˆåŒ¯å…¥é †åºè€Œå®šã€‚

---

# åŒ¯å…¥ç¬¬ä¸‰æ–¹å¥—ä»¶

Go æä¾›å¼·å¤§çš„å¥—ä»¶ç®¡ç†ç³»çµ± `go mod`ã€‚  
å‡è¨­æˆ‘å€‘è¦ä½¿ç”¨å¤–éƒ¨å¥—ä»¶ `github.com/google/uuid`ï¼š

```
go mod init myapp
go get github.com/google/uuid
```

æ¥è‘—ä½¿ç”¨ï¼š

```
package main

import (
    "fmt"
    "github.com/google/uuid"
)

func main() {
    id := uuid.New()
    fmt.Println("æ–° UUID:", id)
}
```

---

# åŒ¯å…¥åˆ¥åï¼ˆimport aliasï¼‰

å¦‚æœåŒ¯å…¥å¥—ä»¶åç¨±å¤ªé•·ï¼Œå¯ä»¥ä½¿ç”¨åˆ¥åï¼š

```
import m "project/mathutil"

func main() {
    fmt.Println(m.Add(2, 3))
}
```

æˆ–ä½¿ç”¨ `_` è¡¨ç¤ºåªåŸ·è¡Œ `init()`ï¼Œä¸ä½¿ç”¨å…§å®¹ï¼š

```
import _ "project/config"
```

---

# ğŸ§© å°ç·´ç¿’ï¼šè£½ä½œä½ çš„å·¥å…·åŒ…

å»ºç«‹ä¸€å€‹ `stringutil` å°åŒ…ï¼Œæä¾›å­—ä¸²å·¥å…·ï¼š

### stringutil/stringutil.go

```
package stringutil

import "strings"

func ToUpperFirst(s string) string {
    if s == "" {
        return s
    }
    return strings.ToUpper(s[:1]) + s[1:]
}
```

### main.go

```
package main

import (
    "fmt"
    "project/stringutil"
)

func main() {
    fmt.Println(stringutil.ToUpperFirst("hello go"))
}
```

åŸ·è¡Œçµæœï¼š

```
Hello go
```

---

# çµèª

é€™ç¯‡æˆ‘å€‘å­¸æœƒäº†ï¼š

- å¦‚ä½•å»ºç«‹è‡ªè¨‚ package
- å¤§å°å¯«æ§åˆ¶å¯è¦‹æ€§
- ä½¿ç”¨ `init()` é€²è¡Œåˆå§‹åŒ–
- åŒ¯å…¥ç¬¬ä¸‰æ–¹å¥—ä»¶èˆ‡ä½¿ç”¨åˆ¥å

åœ¨ä¸‹ä¸€ç¯‡ï¼Œæˆ‘å€‘å°‡æ¢è¨ **Go çš„é™£åˆ—ï¼ˆarrayï¼‰ã€åˆ‡ç‰‡ï¼ˆsliceï¼‰èˆ‡ map**ï¼Œ  
é€™æ˜¯ Go è³‡æ–™çµæ§‹çš„æ ¸å¿ƒä¹‹ä¸€ ğŸš€
