---
title: '[Go å­¸ç¿’ç³»åˆ—] 7. Slice èˆ‡ Map é€²éšæ“ä½œèˆ‡å¯¦æˆ°'
date: '2025-10-03'
summary: 'æ·±å…¥æ¢ç´¢ Go çš„ Slice èˆ‡ Mapï¼ŒåŒ…æ‹¬åº•å±¤è¨˜æ†¶é«”å…±ç”¨ã€range è¡Œç‚ºã€å®¹é‡æ“´å……èˆ‡å¯¦æˆ°æ‡‰ç”¨æŠ€å·§ã€‚'
tags: ['Go', 'Go-Learning']
---

# å‰è¨€

ä¸Šä¸€ç« æˆ‘å€‘å­¸æœƒäº† Slice èˆ‡ Map çš„åŸºæœ¬æ“ä½œï¼Œ  
ä½†å¯¦å‹™ä¸Šå¸¸é‡åˆ°ä¸€äº›é€²éšæƒ…æ³ï¼Œä¾‹å¦‚ï¼š

- Slice åº•å±¤é™£åˆ—å…±ç”¨å°è‡´ä¿®æ”¹å½±éŸ¿å…¶ä»– slice
- Map åœ¨ range ä¸­ä¿®æ”¹å…ƒç´ è¦å°å¿ƒ
- Slice append çš„å®¹é‡æ“´å……æ©Ÿåˆ¶

é€™ç¯‡æˆ‘å€‘å°±ä¾†æ·±å…¥é€™äº›é€²éšè­°é¡Œï¼Œä¸¦åšä¸€äº›å¯¦æˆ°ç·´ç¿’ã€‚

---

# ä¸€ã€Slice åº•å±¤å…±ç”¨è¡Œç‚º

Slice æ˜¯å°åº•å±¤é™£åˆ—çš„å¼•ç”¨ï¼Œæ‰€ä»¥å¤šå€‹ slice å¯èƒ½å…±ç”¨åŒä¸€åº•å±¤ã€‚

```go
a := []int{1, 2, 3, 4, 5}
b := a[1:4] // [2 3 4]

b[0] = 99
fmt.Println(a) // [1 99 3 4 5]
fmt.Println(b) // [99 3 4]
```

> [!NOTE]
> ä¿®æ”¹ slice çš„å…ƒç´ æœƒå½±éŸ¿åŸå§‹åº•å±¤é™£åˆ—ã€‚

---

## é¿å…åº•å±¤å…±ç”¨çš„æ–¹æ³•

ä½¿ç”¨ `copy()` å»ºç«‹ç¨ç«‹ sliceï¼š

```go
a := []int{1, 2, 3, 4, 5}
b := make([]int, 3)
copy(b, a[1:4])
b[0] = 99

fmt.Println(a) // [1 2 3 4 5]
fmt.Println(b) // [99 3 4]
```

---

# äºŒã€Slice append èˆ‡å®¹é‡æ“´å……

Slice çš„å®¹é‡ï¼ˆcapï¼‰æ±ºå®šåº•å±¤é™£åˆ—å¤§å°ã€‚ç•¶ append è¶…éå®¹é‡æ™‚ï¼ŒGo æœƒè‡ªå‹•å»ºç«‹æ–°çš„åº•å±¤é™£åˆ—ã€‚

```go
a := make([]int, 2, 3)
fmt.Println(len(a), cap(a)) // 2 3

a = append(a, 10)
fmt.Println(len(a), cap(a)) // 3 3

a = append(a, 20)
fmt.Println(len(a), cap(a)) // 4 6 ï¼ˆå®¹é‡è‡ªå‹•æ“´å……ï¼‰
```

> [!TIP]
> å®¹é‡å€å¢ç­–ç•¥å¯ä»¥æ¸›å°‘å¤šæ¬¡ reallocationï¼Œæé«˜æ•ˆèƒ½ã€‚

---

# ä¸‰ã€Map è¿­ä»£èˆ‡ä¿®æ”¹

### 1ï¸âƒ£ range æ³¨æ„äº‹é …

åœ¨è¿­ä»£ Map æ™‚ï¼Œå¦‚æœç›´æ¥ä¿®æ”¹å…ƒç´ ï¼š

```go
m := map[string]int{"a": 1, "b": 2}

for k, v := range m {
    m[k] = v * 2
}
fmt.Println(m) // OK
```

> å¯ä»¥ä¿®æ”¹å€¼ï¼Œä½†ä¸èƒ½ç›´æ¥ä¿®æ”¹ keyã€‚Map æœ¬èº«æ˜¯ç„¡åºçš„ï¼Œæ¯æ¬¡è¿­ä»£é †åºå¯èƒ½ä¸åŒã€‚

---

### 2ï¸âƒ£ åˆªé™¤å…ƒç´ 

åœ¨è¿´åœˆä¸­åˆªé™¤å…ƒç´ æ˜¯å®‰å…¨çš„ï¼š

```go
for k := range m {
    if k == "a" {
        delete(m, k)
    }
}
fmt.Println(m)
```

---

# å››ã€Slice èˆ‡ Map å¯¦æˆ°ç¯„ä¾‹

## 1ï¸âƒ£ å»é‡ï¼ˆslice å»é™¤é‡è¤‡å…ƒç´ ï¼‰

```go
func unique(nums []int) []int {
    seen := make(map[int]bool)
    result := []int{}

    for _, n := range nums {
        if !seen[n] {
            result = append(result, n)
            seen[n] = true
        }
    }

    return result
}

func main() {
    nums := []int{1, 2, 2, 3, 3, 4}
    fmt.Println(unique(nums)) // [1 2 3 4]
}
```

---

## 2ï¸âƒ£ çµ±è¨ˆå­—ä¸²å‡ºç¾é »ç‡

```go
func countWords(words []string) map[string]int {
    counter := make(map[string]int)
    for _, w := range words {
        counter[w]++
    }
    return counter
}

func main() {
    fruits := []string{"apple", "banana", "apple", "orange", "banana"}
    fmt.Println(countWords(fruits))
}
```

---

## 3ï¸âƒ£ ç¯©é¸ Slice

```go
func filterEven(nums []int) []int {
    result := []int{}
    for _, n := range nums {
        if n%2 == 0 {
            result = append(result, n)
        }
    }
    return result
}

func main() {
    nums := []int{1, 2, 3, 4, 5, 6}
    fmt.Println(filterEven(nums)) // [2 4 6]
}
```

---

# äº”ã€æ•ˆèƒ½èˆ‡æ³¨æ„äº‹é …

- Slice append æ™‚ç›¡é‡é ä¼°å®¹é‡ï¼Œé¿å…é »ç¹æ“´å……
- Map è¿­ä»£é †åºä¸å›ºå®šï¼Œè‹¥æœ‰é †åºéœ€æ±‚éœ€é¡å¤–æ’åº
- å¤š goroutine ä¿®æ”¹ map æˆ– slice å¿…é ˆåŠ é– (`sync.Mutex`)
- é¿å…ç›´æ¥å…±äº« slice å¼•ç”¨é€ æˆæ„å¤–ä¿®æ”¹

---

# çµèª

é€™ç¯‡æˆ‘å€‘æŒæ¡äº†ï¼š

- Slice çš„åº•å±¤å…±ç”¨èˆ‡ copy æŠ€å·§
- Slice append èˆ‡å®¹é‡æ“´å……ç­–ç•¥
- Map çš„è¿­ä»£ã€ä¿®æ”¹èˆ‡åˆªé™¤
- å¯¦æˆ°ç¯„ä¾‹ï¼šå»é‡ã€çµ±è¨ˆã€ç¯©é¸

ä¸‹ä¸€ç¯‡ï¼Œæˆ‘å€‘å°‡é€²å…¥ **Golang ä¸¦è¡Œç¨‹å¼è¨­è¨ˆå…¥é–€ï¼šGoroutine**ï¼Œ  
æ­£å¼é–‹å§‹æ¢ç´¢ Go çš„é«˜æ•ˆèƒ½ä¸¦è¡Œèƒ½åŠ› ğŸš€
